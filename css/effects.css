/* ==========================================================================
   LE DERNIER PHARE - Visual Effects
   Fog overlays, vignette, night phase, sanity effects, utility classes
   ========================================================================== */

/* ---------- Fog Overlay ---------- */
.fog-overlay {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 2;
  opacity: 0.35;
  background:
    radial-gradient(ellipse 80% 60% at 20% 40%,
      rgba(160, 160, 176, 0.06) 0%,
      transparent 70%),
    radial-gradient(ellipse 60% 80% at 75% 60%,
      rgba(160, 160, 176, 0.05) 0%,
      transparent 65%),
    radial-gradient(ellipse 90% 50% at 50% 80%,
      rgba(160, 160, 176, 0.04) 0%,
      transparent 60%);
  animation: fogDrift 35s ease-in-out infinite alternate;
}

@keyframes fogDrift {
  0% {
    background-position: 0% 0%, 100% 50%, 50% 100%;
    opacity: 0.3;
  }
  33% {
    background-position: 30% 20%, 70% 30%, 20% 80%;
    opacity: 0.4;
  }
  66% {
    background-position: 60% 40%, 40% 70%, 80% 20%;
    opacity: 0.35;
  }
  100% {
    background-position: 100% 60%, 0% 100%, 50% 0%;
    opacity: 0.38;
  }
}

/* ---------- Vignette Overlay ---------- */
.vignette-overlay {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 3;
  box-shadow: inset 0 0 150px rgba(0, 0, 0, 0.7);
}

/* ---------- Hidden Utility ---------- */
.hidden {
  display: none !important;
}

/* ---------- Night Phase ---------- */
.night-phase .fog-overlay {
  opacity: 0.55;
  background:
    radial-gradient(ellipse 80% 60% at 20% 40%,
      rgba(100, 120, 160, 0.1) 0%,
      transparent 70%),
    radial-gradient(ellipse 60% 80% at 75% 60%,
      rgba(80, 100, 150, 0.08) 0%,
      transparent 65%),
    radial-gradient(ellipse 90% 50% at 50% 80%,
      rgba(60, 80, 140, 0.06) 0%,
      transparent 60%);
  animation: fogDriftNight 40s ease-in-out infinite alternate;
}

@keyframes fogDriftNight {
  0% {
    background-position: 0% 0%, 100% 50%, 50% 100%;
    opacity: 0.5;
  }
  50% {
    background-position: 50% 30%, 30% 70%, 70% 20%;
    opacity: 0.6;
  }
  100% {
    background-position: 100% 60%, 0% 100%, 50% 0%;
    opacity: 0.55;
  }
}

.night-phase .vignette-overlay {
  box-shadow:
    inset 0 0 200px rgba(0, 0, 0, 0.85),
    inset 0 0 80px rgba(10, 15, 40, 0.3);
}

/* ---------- Sanity Effects ---------- */
#game-container.sanity-uneasy {
  filter: contrast(1.05) saturate(0.9);
}

#game-container.sanity-low {
  filter: contrast(1.1) saturate(0.7) hue-rotate(5deg);
  animation: sanityLow 4s ease-in-out infinite;
}

@keyframes sanityLow {
  0%, 100% {
    filter: contrast(1.1) saturate(0.7) hue-rotate(5deg);
  }
  25% {
    filter: contrast(1.12) saturate(0.65) hue-rotate(7deg);
  }
  50% {
    filter: contrast(1.08) saturate(0.75) hue-rotate(3deg);
  }
  75% {
    filter: contrast(1.13) saturate(0.68) hue-rotate(6deg);
  }
}

#game-container.sanity-critical {
  filter: contrast(1.3) saturate(0.4) hue-rotate(20deg);
  animation: sanityCritical 2s steps(8) infinite;
}

@keyframes sanityCritical {
  0% {
    filter: contrast(1.3) saturate(0.4) hue-rotate(20deg);
  }
  12% {
    filter: contrast(1.4) saturate(0.3) hue-rotate(25deg) brightness(0.95);
  }
  25% {
    filter: contrast(1.25) saturate(0.45) hue-rotate(15deg);
  }
  37% {
    filter: contrast(1.5) saturate(0.2) hue-rotate(30deg) brightness(0.9);
  }
  50% {
    filter: contrast(1.3) saturate(0.4) hue-rotate(18deg);
  }
  62% {
    filter: contrast(1.35) saturate(0.35) hue-rotate(22deg) brightness(1.05);
  }
  75% {
    filter: contrast(1.45) saturate(0.25) hue-rotate(28deg) brightness(0.92);
  }
  100% {
    filter: contrast(1.3) saturate(0.4) hue-rotate(20deg);
  }
}
